-- -----------------------------------------------------
-- Create Database
-- -----------------------------------------------------
DROP DATABASE IF EXISTS LPL;
CREATE DATABASE LPL;
USE LPL;

-- -----------------------------------------------------
-- Table: admin
-- -----------------------------------------------------
CREATE TABLE admin (
    username VARCHAR(50) PRIMARY KEY,
    admin_name VARCHAR(50) NOT NULL,
    password VARCHAR(100) NOT NULL
);

-- -----------------------------------------------------
-- Table: team
-- -----------------------------------------------------
CREATE TABLE teams (
    team_id VARCHAR(10) PRIMARY KEY,
    team_name VARCHAR(100) NOT NULL,
    logo VARCHAR(255)
);

-- -----------------------------------------------------
-- Table: point_table
-- -----------------------------------------------------
CREATE TABLE point_table (
    id INT AUTO_INCREMENT PRIMARY KEY,
    team_id VARCHAR(10),
    played INT DEFAULT 0,
    won INT DEFAULT 0,
    lost INT DEFAULT 0,
    no_result INT DEFAULT 0,
    nrr DECIMAL(5,2) DEFAULT 0.00,
    points INT DEFAULT 0,
    FOREIGN KEY (team_id) REFERENCES team(team_id)
);

-- -----------------------------------------------------
-- Table: player
-- -----------------------------------------------------
CREATE TABLE player (
    player_id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    team_id VARCHAR(10),
    FOREIGN KEY (team_id) REFERENCES team(team_id) ON DELETE CASCADE
);

CREATE TABLE player_performance (
    performance_id INT AUTO_INCREMENT PRIMARY KEY,
    player_id INT NOT NULL,
    type ENUM('Batsman', 'Captain/Batsman', 'Bowler', 'All-Rounder', 'Wicket-Keeper') NOT NULL,
    number_of_match INT DEFAULT 0,
    runs INT DEFAULT 0,
    wickets INT DEFAULT 0,
    FOREIGN KEY (player_id) REFERENCES player(player_id) ON DELETE CASCADE
);


-- -----------------------------------------------------
-- Table: upcoming_match
-- -----------------------------------------------------
CREATE TABLE upcoming_match (
    match_id INT AUTO_INCREMENT PRIMARY KEY,
    home_team_id VARCHAR(10) NOT NULL,
    visit_team_id VARCHAR(10) NOT NULL,
    date DATE NOT NULL,
    time TIME NOT NULL,
    FOREIGN KEY (home_team_id) REFERENCES team(team_id) ON DELETE CASCADE,
    FOREIGN KEY (visit_team_id) REFERENCES team(team_id) ON DELETE CASCADE
);

-- -----------------------------------------------------
-- Table: recent_match
-- -----------------------------------------------------
CREATE TABLE recent_match (
    match_id INT AUTO_INCREMENT PRIMARY KEY,
    home_team_id VARCHAR(10) NOT NULL,
    visit_team_id VARCHAR(10) NOT NULL,
    home_team_runs INT,
    home_team_wickets INT,
    home_team_overs DECIMAL(4,1),
    visit_team_runs INT,
    visit_team_wickets INT,
    visit_team_overs DECIMAL(4,1),
    final_result TEXT,
    date DATE NOT NULL,
    FOREIGN KEY (home_team_id) REFERENCES team(team_id) ON DELETE CASCADE,
    FOREIGN KEY (visit_team_id) REFERENCES team(team_id) ON DELETE CASCADE
);

-- -----------------------------------------------------
-- Table: coach
-- -----------------------------------------------------
CREATE TABLE coach (
    coach_id INT AUTO_INCREMENT PRIMARY KEY,
    first_name VARCHAR(100) NOT NULL,
    last_name VARCHAR(100) NOT NULL,
    role VARCHAR(100),
    team_id VARCHAR(10),
    FOREIGN KEY (team_id) REFERENCES team(team_id)
);

-- -----------------------------------------------------
-- Insert Sample Data
-- -----------------------------------------------------
-- Admins
INSERT INTO admin (username, admin_name, password) VALUES
('admin1', 'Super Admin', 'password123'),
('manager1', 'Tournament Manager', 'securePass');

-- Teams
INSERT INTO team (team_id, team_name, logo) VALUES
('T01', 'Colombo Kings', 'Pictures/Colombo-1.png'),
('T02', 'Galle Gladiators', 'Pictures/Galle-1.png'),
('T03', 'B-Love Kandy', 'Pictures/Kandy-1.png'),
('T04', 'Jaffna Stallions', 'Pictures/Jaffna-1.png'),
('T05', 'Dambulla Giants', 'Pictures/DabullaLogo.png');

-- Point Table
INSERT INTO point_table (team_id, played, won, lost, no_result, nrr, points) VALUES
('T01', 2, 1, 1, 0, 0.25, 2),
('T02', 2, 2, 0, 0, 1.50, 4),
('T03', 2, 0, 2, 0, -1.20, 0),
('T04', 2, 1, 1, 0, 0.10, 2),
('T05', 0, 0, 0, 0, 0.00, 0);

-- -----------------------------------------------------
-- Players
-- -----------------------------------------------------
-- Colombo Kings (T01)
INSERT INTO player (first_name, last_name, team_id) VALUES
('Kusal', 'Perera', 'T01'),
('Avishka', 'Fernando', 'T01'),
('Dinesh', 'Chandimal', 'T01'),
('Angelo', 'Mathews', 'T01'),
('Thisara', 'Perera', 'T01'),
('Lahiru', 'Kumara', 'T01'),
('Suranga', 'Lakmal', 'T01'),
('Wanindu', 'Hasaranga', 'T01'),
('Charith', 'Asalanka', 'T01'),
('Isuru', 'Udana', 'T01'),
('Dimuth', 'Karunaratne', 'T01');

-- Galle Gladiators (T02)
INSERT INTO player (first_name, last_name, team_id) VALUES
('Danushka', 'Gunathilaka', 'T02'),
('Bhanuka', 'Rajapaksa', 'T02'),
('Mohammad', 'Amir', 'T02'),
('Lakshan', 'Sandakan', 'T02'),
('Ben', 'Cutting', 'T02'),
('Colin', 'Ingram', 'T02'),
('Dhananjaya', 'de Silva', 'T02'),
('Akila', 'Dananjaya', 'T02'),
('Shoaib', 'Malik', 'T02'),
('Niroshan', 'Dickwella', 'T02'),
('Shanaka', 'Dhananjaya', 'T02');

-- B-Love Kandy (T03)
INSERT INTO player (first_name, last_name, team_id) VALUES
('Chris', 'Gayle', 'T03'),
('Andre', 'Russell', 'T03'),
('Kusal', 'Mendis', 'T03'),
('Ajantha', 'Mendis', 'T03'),
('Lahiru', 'Thirimanne', 'T03'),
('Chaminda', 'Vaas', 'T03'),
('Mujeeb', 'ur Rahman', 'T03'),
('Pathum', 'Nissanka', 'T03'),
('Ashen', 'Bandara', 'T03'),
('Kusal', 'Janith', 'T03'),
('Kevin', 'O Brien', 'T03');

-- Jaffna Stallions (T04)
INSERT INTO player (first_name, last_name, team_id) VALUES
('Upul', 'Tharanga', 'T04'),
('Mahela', 'Jayawardene', 'T04'),
('Sanath', 'Jayasuriya', 'T04'),
('Muttiah', 'Muralitharan', 'T04'),
('Anil', 'Kumble', 'T04'),
('Dwayne', 'Bravo', 'T04'),
('Michael', 'Hussey', 'T04'),
('Faf', 'du Plessis', 'T04'),
('Mitchell', 'Starc', 'T04'),
('Kagiso', 'Rabada', 'T04'),
('Hashim', 'Amla', 'T04');

-- Dambulla Giants (T05)
INSERT INTO player (first_name, last_name, team_id) VALUES
('Tillakaratne', 'Dilshan', 'T05'),
('Marvan', 'Atapattu', 'T05'),
('Roshan', 'Mahanama', 'T05'),
('Kumar', 'Sangakkara', 'T05'),
('Aravinda', 'de Silva', 'T05'),
('Chamari', 'Atapattu', 'T05'),
('Lasith', 'Malinga', 'T05'),
('Nuwan', 'Kulasekara', 'T05'),
('Rangana', 'Herath', 'T05'),
('Ajantha', 'Fernando', 'T05'),
('Upul', 'Chandana', 'T05');

-- Colombo Kings (T01) -> player_id 1-11
INSERT INTO player_performance (player_id, type, number_of_match, runs, wickets) VALUES
(1, 'Wicket-Keeper', 45, 1200, 0),
(2, 'Batsman', 38, 980, 0),
(3, 'Batsman', 52, 1400, 0),
(4, 'All-Rounder', 65, 2200, 60),
(5, 'All-Rounder', 70, 1800, 95),
(6, 'Bowler', 30, 120, 45),
(7, 'Bowler', 80, 300, 110),
(8, 'All-Rounder', 40, 900, 75),
(9, 'Batsman', 28, 750, 0),
(10, 'Bowler', 60, 450, 82),
(11, 'Batsman', 100, 3200, 0);

-- Galle Gladiators (T02) -> player_id 12-22
INSERT INTO player_performance (player_id, type, number_of_match, runs, wickets) VALUES
(12, 'Batsman', 55, 1500, 0),
(13, 'Batsman', 47, 1320, 0),
(14, 'Bowler', 90, 250, 150),
(15, 'Bowler', 60, 120, 85),
(16, 'All-Rounder', 70, 1600, 70),
(17, 'Batsman', 75, 2100, 0),
(18, 'All-Rounder', 85, 2000, 65),
(19, 'Bowler', 45, 200, 50),
(20, 'All-Rounder', 200, 5000, 150),
(21, 'Wicket-Keeper', 95, 2700, 0),
(22, 'All-Rounder', 50, 1300, 45);

-- B-Love Kandy (T03) -> player_id 23-33
INSERT INTO player_performance (player_id, type, number_of_match, runs, wickets) VALUES
(23, 'Batsman', 400, 14500, 30),
(24, 'All-Rounder', 350, 7200, 350),
(25, 'Batsman', 80, 2300, 0),
(26, 'Bowler', 160, 300, 180),
(27, 'Batsman', 120, 3500, 0),
(28, 'Bowler', 250, 500, 400),
(29, 'Bowler', 60, 100, 70),
(30, 'Batsman', 30, 890, 0),
(31, 'All-Rounder', 20, 400, 15),
(32, 'Wicket-Keeper', 110, 2800, 0),
(33, 'All-Rounder', 210, 4200, 120);

-- Jaffna Stallions (T04) -> player_id 34-44
INSERT INTO player_performance (player_id, type, number_of_match, runs, wickets) VALUES
(34, 'Wicket-Keeper', 220, 6800, 0),
(35, 'Batsman', 500, 12000, 0),
(36, 'All-Rounder', 450, 13500, 300),
(37, 'Bowler', 495, 800, 530),
(38, 'Bowler', 300, 500, 400),
(39, 'All-Rounder', 400, 6000, 500),
(40, 'Batsman', 250, 7500, 0),
(41, 'Batsman', 150, 4500, 0),
(42, 'Bowler', 120, 300, 220),
(43, 'Bowler', 80, 200, 130),
(44, 'Batsman', 250, 9000, 0);

-- Dambulla Giants (T05) -> player_id 45-55
INSERT INTO player_performance (player_id, type, number_of_match, runs, wickets) VALUES
(45, 'All-Rounder', 330, 10500, 120),
(46, 'Batsman', 350, 8500, 0),
(47, 'Batsman', 200, 5500, 0),
(48, 'Wicket-Keeper', 450, 14200, 0),
(49, 'All-Rounder', 380, 9700, 150),
(50, 'All-Rounder', 250, 6500, 120),
(51, 'Bowler', 226, 550, 390),
(52, 'Bowler', 190, 350, 200),
(53, 'Bowler', 175, 250, 180),
(54, 'Bowler', 120, 220, 130),
(55, 'All-Rounder', 250, 3700, 180);


-- -----------------------------------------------------
-- Coaches
-- -----------------------------------------------------
-- Colombo Kings (T01)
INSERT INTO coach (first_name, last_name, role, team_id) VALUES
('Alex', 'Ferguson', 'Head Coach', 'T01'),
('Trevor', 'Bayliss', 'Batting Coach', 'T01'),
('Chaminda', 'Vaas', 'Bowling Coach', 'T01');

-- Galle Gladiators (T02)
INSERT INTO coach (first_name, last_name, role, team_id) VALUES
('Pep', 'Guardiola', 'Head Coach', 'T02'),
('Grant', 'Flower', 'Batting Coach', 'T02'),
('Waqar', 'Younis', 'Bowling Coach', 'T02');

-- B-Love Kandy (T03)
INSERT INTO coach (first_name, last_name, role, team_id) VALUES
('Zinedine', 'Zidane', 'Head Coach', 'T03'),
('Mahela', 'Jayawardene', 'Batting Coach', 'T03'),
('Allan', 'Donald', 'Bowling Coach', 'T03');

-- Jaffna Stallions (T04)
INSERT INTO coach (first_name, last_name, role, team_id) VALUES
('Jurgen', 'Klopp', 'Head Coach', 'T04'),
('Hashan', 'Tillakaratne', 'Batting Coach', 'T04'),
('Chamila', 'Gamage', 'Bowling Coach', 'T04');

-- Dambulla Giants (T05)
INSERT INTO coach (first_name, last_name, role, team_id) VALUES
('Ravi', 'Shastri', 'Head Coach', 'T05'),
('Arjuna', 'Ranatunga', 'Batting Coach', 'T05'),
('Courtney', 'Walsh', 'Bowling Coach', 'T05');

-- -----------------------------------------------------
-- Upcoming Matches
-- -----------------------------------------------------
INSERT INTO upcoming_match (home_team_id, visit_team_id, date, time) VALUES
('T01', 'T02', '2025-09-10', '15:00:00'),
('T03', 'T04', '2025-09-12', '16:00:00'),
('T05', 'T01', '2025-09-15', '14:30:00'),
('T02', 'T03', '2025-09-18', '17:00:00'),
('T04', 'T05', '2025-09-20', '18:00:00');

-- -----------------------------------------------------
-- Recent Matches
-- -----------------------------------------------------
INSERT INTO recent_match 
(home_team_id, visit_team_id, home_team_runs, home_team_wickets, home_team_overs, 
 visit_team_runs, visit_team_wickets, visit_team_overs, final_result, date) 
VALUES
('T01', 'T03', 180, 6, 20.0, 175, 8, 20.0, 'Colombo Kings won by 5 runs', '2025-09-01'),
('T02', 'T05', 200, 5, 20.0, 198, 7, 20.0, 'Galle Gladiators won by 2 runs', '2025-09-02'),
('T03', 'T01', 150, 10, 18.4, 151, 4, 17.3, 'Colombo Kings won by 6 wickets', '2025-09-03'),
('T04', 'T02', 210, 7, 20.0, 205, 9, 20.0, 'Jaffna Stallions won by 5 runs', '2025-09-04'),
('T05', 'T03', 160, 8, 19.5, 161, 5, 20.0, 'B-Love Kandy won by 5 wickets', '2025-09-05');
